<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2">
    <link rel="manifest" href="/site.webmanifest?v=2">
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=2" color="#5bbad5">
    <link rel="shortcut icon" href="/favicon.ico?v=2">
    <style>
      html, body, canvas {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        background-color: black;
      }

      a {
        color: #6495ed;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      .info_msg {
        position: absolute;
        top: 50%;
        left: 50%;
        -moz-transform: translateX(-50%) translateY(-50%);
        -webkit-transform: translateX(-50%) translateY(-50%);
        transform: translateX(-50%) translateY(-50%);
        text-align: center;

        color: white;
        font-size: 3em;
        font-family: sans-serif;
      }

      #welcomebox {
        background-color: #000000DD;
        font-size: 1em;
        text-align: left;
        padding: 0.2em;
        overflow: auto;
        max-height: 90%;
      }

      #thankyoubox, #welcomebox {
        display: none;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
    <script>
      Module = {
        canvas: document.getElementById('canvas')
      }

      window.addEventListener('load', function(load_event) {
        document.getElementById('close_welcomebox').addEventListener('click',
          function(e) {
            var welcomeBox = document.getElementById('welcomebox');
            welcomebox.parentNode.removeChild(welcomebox);
          });
        });
    </script>
    {{{ SCRIPT }}}
    <div id="loadingbox" class="info_msg">
      <h1>Loading...</h1>
    </div>
    <div id="thankyoubox" class="info_msg">
      <h1>Thanks for playing!</h1>
      <p>
        You can now close this tab, or reload the page to start again.
      </p>
    </div>
    <div id="welcomebox" class="info_msg">
      <h1>Welcome to RigelEngine (web version)!</h1>
      <p>
        RigelEngine is an open-source recreation of the game&nbsp;<a href="https://en.wikipedia.org/wiki/Duke_Nukem_II" target="_blank">Duke Nukem II</a>&nbsp;for modern systems, offering various enhancements like increased frame rate, better game controller support, a wide-screen mode, quick saving etc. This is the web version, made using Emscripten and Webassembly (wasm).
        It's still work in progress and has a few limitations that don't exist in the native version (see below).
      </p>
      <p>
        More info:&nbsp;<a href="https://github.com/lethal-guitar/RigelEngine" target="_blank">GitHub project</a><br/>
        Updates:&nbsp;<a href="https://lethalguitar.wordpress.com/category/rigel-engine" target="_blank">Blog</a>,&nbsp;<a href="https://twitter.com/lethal_guitar" target="_blank">Twitter</a>,&nbsp;<a href="https://www.youtube.com/user/lethalguitar128/videos" target="_blank">YouTube</a><br/>
        <a href="https://github.com/lethal-guitar/RigelEngine/releases" target="_blank">Download a native build (Windows/Mac OS/Linux)</a>
      </p>

      <h2>Controls</h2>
      <p>
      Press Esc to enter the main menu, then use arrow keys and Enter/Esc to navigate the menus.
      Default in-game controls are arrow keys for movement, Ctrl to jump and Alt to shoot.
      Pressing F1 while in-game brings up an options menu, where you can customize controls (recommended on Mac) and enable enhancements like widescreen mode/quick saving.
      To go back to the main menu press Esc and then Y to confirm.
      </p>

      <h2>Known issues/limitations</h2>
      <ul>
        <li>On Mac OS, the default controls are in conflict with some system-wide shortcuts (e.g. Ctrl + Up arrow for switching between applications etc.) I'd recommend reconfiguring the controls (see above) if you're on a Mac so that the Ctrl key is not used. This is not a problem in the native Mac version as it can use true fullscreen mode, but that doesn't work in the web version unfortunately.</li>
        <li>Saved games, high scores, and options can't be saved permanently and are lost when reloading or closing the page.</li>
        <li>It's not possible to play the registered version.</li>
        <li>Due to missing touch input support, there is no way to interact with the game on mobile devices (unless you plug in a USB keyboard or game controller), so it will just run through the intro loop forever.</li>
        <li>Screen fade-in and fade-out effects are missig.</li>
        <li>Switching between sound styles causes the UI to temporarily become unresponsive (a loading indicator isn't displayed correctly).</li>
      </ul>

      <p>
      If you find any problems not mentioned in the list above, please&nbsp;<a href="https://github.com/lethal-guitar/RigelEngine/issues/new/choose" target="_blank">open an issue</a>&nbsp;on GitHub!
      </p>

      <p>
      Enjoy the game! :)
      </p>

      <button id="close_welcomebox">Close this message</button>
    </div>
  </body>
</html>
